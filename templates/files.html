{% extends "base.html" %}
{% block title %}Files ‚Äî DevVault{% endblock %}
{% block content %}
<div class="container">
    <div class="page-header">
        <div>
            <h1 class="page-title">File manager</h1>
            <div class="page-subtitle">Store and share files with your team</div>
        </div>
        <div class="page-actions">
            <a href="{{ url_for('upload_file') }}" class="btn btn-primary btn-sm">Upload file</a>
            <a href="{{ url_for('read_file') }}" class="btn btn-default btn-sm">Read file</a>
        </div>
    </div>

    <!-- My files -->
    <h2
        style="font-size:0.875rem;font-weight:600;color:var(--text-secondary);margin-bottom:0.75rem;text-transform:uppercase;letter-spacing:0.05em;">
        Your files</h2>
    {% if my_files %}
    <div class="item-list mb-3">
        {% for file in my_files %}
        <div class="item-row">
            <div class="item-icon">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                    <path
                        d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688Z" />
                </svg>
            </div>
            <div style="flex:1;min-width:0;">
                <div class="item-name">{{ file.filename }}</div>
                <div class="text-xs text-muted mt-1">
                    {% if file.is_private %}<span class="label label-gray">Private</span>{% else %}<span
                        class="label label-green">Public</span>{% endif %}
                    &nbsp;¬∑ Uploaded {{ file.created_at[:10] if file.created_at else '' }}
                </div>
            </div>
            <a href="{{ url_for('download_file', file_id=file.id) }}" class="btn btn-default btn-sm">Download</a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state mb-3" style="border:1px solid var(--border);border-radius:var(--radius-lg);">
        <div class="empty-state-icon">üìÅ</div>
        <div class="empty-state-title">No files uploaded</div>
        <div class="empty-state-desc">Upload your first file to get started.</div>
    </div>
    {% endif %}

    <!-- Public files -->
    <h2
        style="font-size:0.875rem;font-weight:600;color:var(--text-secondary);margin-bottom:0.75rem;text-transform:uppercase;letter-spacing:0.05em;">
        Public files</h2>
    {% if all_files %}
    <div class="item-list">
        {% for file in all_files %}
        <div class="item-row">
            <div class="item-icon">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                    <path
                        d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688Z" />
                </svg>
            </div>
            <div style="flex:1;min-width:0;">
                <div class="item-name">{{ file.filename }}</div>
                <div class="text-xs text-muted mt-1">
                    by <a href="{{ url_for('profile', user_id=file.user_id) }}" style="color:var(--text-secondary);">{{
                        file.username }}</a>
                </div>
            </div>
            <a href="{{ url_for('download_file', file_id=file.id) }}" class="btn btn-default btn-sm">Download</a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state" style="border:1px solid var(--border);border-radius:var(--radius-lg);">
        <div class="empty-state-icon">üìÅ</div>
        <div class="empty-state-title">No public files</div>
        <div class="empty-state-desc">No files have been shared publicly yet.</div>
    </div>
    {% endif %}
</div>
{% endblock %}